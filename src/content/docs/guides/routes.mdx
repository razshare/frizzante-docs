---
title: Routes
---

import { FileTree} from '@astrojs/starlight/components';

Make a new `lib/routes.go` file.
<FileTree>
    - main.go
    - lib
        - server.go
        - routes.go
</FileTree>

Define an `init()` function and use `Server.WithRequestHandler()` to define a request handler.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendMessage("Hello")
    })
}
```

## Status

Use `res.SendStatus()` to set the status of the response.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendStatus(404)                             // Sends status 404.
        res.SendMessage("Resource not found, sorry.")   // Sends text.
    })
}
```

## Path

Request handlers can define dynamic fields within the pattern using `{}` syntax.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /{name}", func(req *f.Request, res *f.Response) {
        //...
    })
}
```

Use `req.ReceivePath()` to retrieve such fields.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /{name}", func(req *f.Request, res *f.Response) {
        name := req.ReceivePath("name")     // Retrieves field "name".
        res.SendMessage("Hello " + name)    // Sends text.
    })
}
```

## Query

Use `req.ReceiveQuery()` to retrieve query fields.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        name := req.ReceiveQuery("name")    // Retrieves field "name".
        res.SendMessage("Hello " + name)    // Sends text.
    })
}
```

## Forms

Use `req.ReceiveForm()` to retrieve and parse forms.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        form := req.ReceiveForm()           // Retrieves and parses the form.
        name := form.Get("name")            // Retrieves field "name".
        res.SendMessage("Hello " + name)    // Sends text.
    })
}
```

## Json

Use `req.ReceiveJson()` to parse incoming content as json and `req.SendJson()` to send data as json.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

type model struct {
    Name string `json:"name"`
}

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        var value *model         // Prepares empty value.
        req.ReceiveJson(value)   // Parses the content into value.
        res.SendJson(value)      // Sends it back.
    })
}
```

## Headers

Use `req.ReceiveHead()` to retrieve header fields and `res.SendHeader()` to send them.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        ctype := req.ReceiveHeader("Content-Type")  // Retrieves field "Content-Type".
        res.SendHeader("Content-Type", ctype)       // Sends it back.
    })
}
```

## Cookies

Use `req.ReceiveCookie()` to retrieve cookies and `res.SendCookie()` to send them.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        cookie := req.ReceiveCookie("session-id")   // Retrieves cookie "session-id".
        res.SendCookie("session-id", cookie)        // Sends it back.
    })
}
```

## Redirect


Use `res.SendRedirect()` to redirect to a different location.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendRedirect("/login", 302)
    })
}
```

## Navigate

Use `res.SendNavigate()` to redirect to a different location with status `302`.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendNavigate("/login")
    })
}
```

## Views

View files are svelte components located under `lib/components/views`.

<FileTree>
    - main.go
    - lib
        - components
            - views
                - Welcome.svelte
                - Login.svelte
                - Profile.svelte
                - ...
</FileTree>

Use `res.SendView()` to send a view along with some optional data.

```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendView(f.View{
            Name: "Welcome",
            Data: map[string]string{
                "name": "world", // Provide data for the view.
            }
        }) // Sends file "lib/components/views/Welcome.svelte"
    })
}
```

Then use context api to retrieve provided data.

```svelte
<script lang="ts">
    import type { ServerContext } from "$frizzante/types.ts"
    const server = getContext("server") as ServerContext<{
        name: string
    }>
</script>

<h1>Hello {server.data.name}</h1>
```

## Server Sent Events

Use `res.SendSseUpgrade()` to upgrade the connection to server sent events.


```go
//lib/routes.go
package lib

import (
    f "github.com/razshare/frizzante"
    "time"
)

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        alive := req.IsAlive()          // Track request status.
        ev := res.SendSseUpgrade()      // Send sse upgrade.
        for *alive {                    // Loop until request gets cancelled.
            ev("channel-1")             // Switch to event "channel-1".
            res.SendMessage("hello 1")  // Send text.
            ev("channel-2")             // Switch to event "channel-1".
            res.SendMessage("hello 2")  // Send text.
            time.Sleep(time.Second)     // Sleep for 1 second.
        }
    })
}
```

## Web Sockets

Use `res.SendWsUpgrade()` to upgrade the connection to web sockets.

```go
//lib/routes.go
package lib

import (
    f "github.com/razshare/frizzante"
    "time"
)

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        alive := req.IsAlive()          // Track request status.
        res.SendWsUpgrade()             // Send ws upgrade.
        for *alive {                    // Loop until request gets cancelled.
            ev("channel-1")             // Switch to event "channel-1".
            res.SendMessage("hello 1")  // Send text.
            ev("channel-2")             // Switch to event "channel-1".
            res.SendMessage("hello 2")  // Send text.
            time.Sleep(time.Second)     // Sleep for 1 second.
        }
    })
}
```

## Other Details

Order of operations matters when sending data to the client.

**Status codes** must be sent **before headers**, which must be sent **before content**.

:::danger
For example, sending the status code with `res.SendStatus()` **after** you've already sent content
with `res.SendMessage()` is not allowed.


```go
//lib/routes.go
package lib

import f "github.com/razshare/frizzante"

func init() {
	Server.WithRequestHandler("GET /", func(req *f.Request, res *f.Response) {
        res.SendMessage("Hello.")   // Sending text.    (Will Succeed)
        res.SendStatus(200)         // Sending status.  (Will Fail Silently)
    })
}
```

The request handler will continue execution and the user will receive the response correctly

```http
HTTP/1.1 200 OK
Date: Sun, 25 May 2025 02:00:37 GMT
Content-Length: 6
Content-Type: text/plain; charset=utf-8

Hello.
```

But `res.SendStatus()` will fail and send an error to 
the server notifier.

Assuming you're using the default notifier, you'll see and error of sorts in your console

```sh
listening for requests at http://127.0.0.1:8080
status is locked
```

`status is locked`, meaning the status code has already been sent to the client and there's nothing you can do about it.
:::