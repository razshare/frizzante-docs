---
title: Sessions
---

import { FileTree, Tabs, TabItem } from '@astrojs/starlight/components'

Before using sessions you need to create a **session adapter**.

:::note
The starter template comes with one out of the box.
:::

## Session Adapter

Make a `lib/sessions/adapter.go` file and implement your **session adapter** in there.

```go
//lib/sessions/adapter.go
import "github.com/razshare/frizzante"

type Data struct {
	Name string
}

var memory = map[string]Data{}

// Adapter builds sessions in memory.
func Adapter(session *Session[Data]) {
	session.WithExistsHandler(func() bool {
		_, exists := memory[session.Id]
		return exists
	})

	session.WithLoadHandler(func() {
		session.Data = memory[session.Id]
	})

	session.WithSaveHandler(func() {
		memory[session.Id] = session.Data
	})

	session.WithDestroyHandler(func() {
		delete(memory, session.Id)
	})

	if session.Exists() {
		session.Load()
		return
	}

	session.Data = Data{}
}
```

## Start Session

Use `frizzante.SessionStart()` to start a session.

```go
//main.go
var server = frizzante.
    //...
    WithRequestHandler("GET /", routes.GetHandler)
    //...
```

```go
//lib/routes/handler.go
package lib

import (
	"github.com/razshare/frizzante"
	"main/lib/sessions"
	"time"
)

func GetHandler(req *frizzante.Request, res *frizzante.Response) {
	session := frizzante.
        SessionStart(req, res, sessions.Adapter)  // Start session.
    session.Data.Name = "world"                   // Modify session data.
    session.Save()                                // Save changes.
}
```